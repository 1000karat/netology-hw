
# –î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ: [–°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ Zabbix](https://github.com/netology-code/smon-homeworks/blob/main/hw-02.md)
*–ê–≤—Ç–æ—Ä: –°—ã—Å–æ–µ–≤ –ê–ª–µ–∫—Å–µ–π*

## üìå –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ
[–ó–∞–¥–∞–Ω–∏–µ 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Zabbix Server —Å –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º.](#–ó–∞–¥–∞–Ω–∏–µ-1)  
[–ó–∞–¥–∞–Ω–∏–µ 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Zabbix Agent –Ω–∞ –¥–≤–∞ —Ö–æ—Å—Ç–∞.](#–ó–∞–¥–∞–Ω–∏–µ-2)  
[–ó–∞–¥–∞–Ω–∏–µ 3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Zabbix Agent –Ω–∞ Windows (–∫–æ–º–ø—å—é—Ç–µ—Ä) –∏ –ø–æ–¥–∫–ª—é—á–∏—Ç–µ –µ–≥–æ –∫ —Å–µ—Ä–≤–µ—Ä—É Zabbix.](#–ó–∞–¥–∞–Ω–∏–µ-3-—Å–æ-–∑–≤—ë–∑–¥–æ—á–∫–æ–π*)  
##
### –¶–µ–ª–∏ –∑–∞–¥–∞–Ω–∏—è
1. –ù–∞—É—á–∏—Ç—å—Å—è —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å Zabbix Server c –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º
2. –ù–∞—É—á–∏—Ç—å—Å—è —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å Zabbix Agent –Ω–∞ —Ö–æ—Å—Ç—ã
3. –ù–∞—É—á–∏—Ç—å—Å—è —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å Zabbix Agent –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä –∏ –ø–æ–¥–∫–ª—é—á–∞—Ç—å –µ–≥–æ –∫ —Å–µ—Ä–≤–µ—Ä—É Zabbix 

### –ó–∞–¥–∞–Ω–∏–µ 1 
–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Zabbix Server —Å –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º.

#### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º 
1. –ü—Ä–∏–∫—Ä–µ–ø–∏—Ç–µ –≤ —Ñ–∞–π–ª README.md —Å–∫—Ä–∏–Ω—à–æ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤ –∞–¥–º–∏–Ω–∫–µ.
2. –ü—Ä–∏–ª–æ–∂–∏—Ç–µ –≤ —Ñ–∞–π–ª README.md —Ç–µ–∫—Å—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã—Ö –∫–æ–º–∞–Ω–¥ –≤ GitHub.

#### üîß –ü–æ—à–∞–≥–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å
1.  –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Zabbix Server –Ω–∞ Debian 11.11. –ü–æ–¥–∫–ª—é—á–∏—Ç—Å—è –∫ —Ü–µ–ª–µ–≤–æ–º—É —Å–µ—Ä–≤–µ—Ä—É –ø–æ SSH:
    ``` bash
    ssh user@server_ip
    ```
2. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–∏—Å—Ç–µ–º—ã. –î–æ–±–∞–≤–ª—è–µ–º —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ø—É—Ç–∏ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é PATH –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è root: 
	``` bash
    echo 'export PATH=$PATH:/usr/sbin:/sbin:/usr/local/sbin' >> /root/.bashrc
    ```
3. –ü—Ä–∏–º–µ–Ω—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞:
    ``` bash
    source /root/.bashrc
    ```
4. –û–±–Ω–æ–≤–ª—è–µ–º —Å–∏—Å—Ç–µ–º—É –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —É—Ç–∏–ª–∏—Ç—ã:
	``` bash
	apt update && apt upgrade -y
	apt install htop vim curl -y
	```
5. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º PostgreSQL:
    ``` bash
    apt install postgresql postgresql-contrib -y
    ```
6. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Zabbix Server. –° –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∑–∞–≥—Ä—É–∑–∫–∏ Zabbix –≤—ã–ø–æ–ª–Ω—è–µ–º –∫–æ–º–∞–Ω–¥—ã —É—Å—Ç–∞–Ω–æ–≤–∫–∏. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è Zabbix:
    ``` bash
    wget https://repo.zabbix.com/zabbix/6.0/debian/pool/main/z/zabbix-release/zabbix-release_latest_6.0+debian11_all.deb
	dpkg -i zabbix-release_latest_6.0+debian11_all.deb
	apt update
    ```
 7. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:
    ``` bash
	apt install zabbix-server-pgsql zabbix-frontend-php php7.4-pgsql zabbix-apache-conf zabbix-sql-scripts zabbix-agent -y
    ```
8. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö. –°–æ–∑–¥–∞—ë–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:
    ``` bash
    sudo -u postgres createuser --pwprompt zabbix
    ```
9. –°–æ–∑–¥–∞—ë–º –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö:
    ``` bash
    sudo -u postgres createdb -O zabbix -E UTF8 zabbix
    ```
10. –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É –±–∞–∑—ã: 
    ``` bash
    zcat /usr/share/zabbix-sql-scripts/postgresql/server.sql.gz | sudo -u zabbix psql zabbix
    ```
11. –£–∫–∞–∑—ã–≤–∞–µ–º –ø–∞—Ä–æ–ª—å –ë–î –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:
    ``` bash
    sed -i "s/# DBPassword=/DBPassword=1234567890p/g" /etc/zabbix/zabbix_server.conf
    ```
12. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Zabbix Agent –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ. –î–æ–±–∞–≤–ª—è–µ–º –¥–æ—Å—Ç—É–ø –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏:
    ``` bash
    sed -i '/^Server=/ s/$/,192.168.18.0\/24/' /etc/zabbix/zabbix_agentd.conf
    ```
13. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤. –ó–∞–ø—É—Å–∫–∞–µ–º –∏ –¥–æ–±–∞–≤–ª—è–µ–º —Å–µ—Ä–≤–∏—Å—ã –≤ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫:
    ``` bash
    systemctl restart zabbix-server zabbix-agent apache2
	systemctl enable zabbix-server zabbix-agent apache2
    ```
14. üìå –°–∫—Ä–∏–Ω—à–æ—Ç—ã:
![–°–∫—Ä–∏–Ω—à–æ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏](https://raw.githubusercontent.com/1000karat/netology-hw/refs/heads/main/img/hw-02-01.png)
![–°–∫—Ä–∏–Ω—à–æ—Ç zabbix](https://raw.githubusercontent.com/1000karat/netology-hw/refs/heads/main/img/hw-02-02.png)  

### –ó–∞–¥–∞–Ω–∏–µ 2 
–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Zabbix Agent –Ω–∞ –¥–≤–∞ —Ö–æ—Å—Ç–∞.

#### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º
1. –ü—Ä–∏–ª–æ–∂–∏—Ç–µ –≤ —Ñ–∞–π–ª README.md —Å–∫—Ä–∏–Ω—à–æ—Ç —Ä–∞–∑–¥–µ–ª–∞ Configuration > Hosts, –≥–¥–µ –≤–∏–¥–Ω–æ, —á—Ç–æ –∞–≥–µ–Ω—Ç—ã –ø–æ–¥–∫–ª—é—á–µ–Ω—ã –∫ —Å–µ—Ä–≤–µ—Ä—É
2. –ü—Ä–∏–ª–æ–∂–∏—Ç–µ –≤ —Ñ–∞–π–ª README.md —Å–∫—Ä–∏–Ω—à–æ—Ç –ª–æ–≥–∞ zabbix agent, –≥–¥–µ –≤–∏–¥–Ω–æ, —á—Ç–æ –æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —Å–µ—Ä–≤–µ—Ä–æ–º
3. –ü—Ä–∏–ª–æ–∂–∏—Ç–µ –≤ —Ñ–∞–π–ª README.md —Å–∫—Ä–∏–Ω—à–æ—Ç —Ä–∞–∑–¥–µ–ª–∞ Monitoring > Latest data –¥–ª—è –æ–±–æ–∏—Ö —Ö–æ—Å—Ç–æ–≤, –≥–¥–µ –≤–∏–¥–Ω—ã –ø–æ—Å—Ç—É–ø–∞—é—â–∏–µ –æ—Ç –∞–≥–µ–Ω—Ç–æ–≤ –¥–∞–Ω–Ω—ã–µ.
4. –ü—Ä–∏–ª–æ–∂–∏—Ç–µ –≤ —Ñ–∞–π–ª README.md —Ç–µ–∫—Å—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã—Ö –∫–æ–º–∞–Ω–¥ –≤ GitHub

#### üîß –ü–æ—à–∞–≥–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å
1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–∏—Å—Ç–µ–º—ã. –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ —Å–µ—Å—Å–∏—é root:
    ``` bash
    sudo -s
    ```
2. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è Zabbix
    ``` bash
    wget https://repo.zabbix.com/zabbix/6.0/ubuntu/pool/main/z/zabbix-release/zabbix-release_latest_6.0+ubuntu22.04_all.deb
	dpkg -i zabbix-release_latest_6.0+ubuntu22.04_all.deb
	apt update
    ```
3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∞–≥–µ–Ω—Ç–∞
    ``` bash
    apt install zabbix-agent -y
    ```
4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É. –£–∫–∞–∑—ã–≤–∞–µ–º IP —Å–µ—Ä–≤–µ—Ä–∞ Zabbix:
    ``` bash
    sed -i 's/^Server=.*/Server=192.168.18.147,192.168.18.0\/24/' /etc/zabbix/zabbix_agentd.conf
    ```
5. –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏:
    ``` bash
    sed -i 's/^ServerActive=.*/ServerActive=192.168.18.147/' /etc/zabbix/zabbix_agentd.conf
    ```
6. –ó–∞–ø—É—Å–∫ –∞–≥–µ–Ω—Ç–∞
    ``` bash
    systemctl restart zabbix-agent
	systemctl enable zabbix-agent
    ```
7. üìå –°–∫—Ä–∏–Ω—à–æ—Ç—ã:
![–°–∫—Ä–∏–Ω—à–æ—Ç Hosts](https://raw.githubusercontent.com/1000karat/netology-hw/refs/heads/main/img/hw-02-03.png)
![–°–∫—Ä–∏–Ω—à–æ—Ç log](https://raw.githubusercontent.com/1000karat/netology-hw/refs/heads/main/img/hw-02-04.png)
![–°–∫—Ä–∏–Ω—à–æ—Ç Latest data](https://raw.githubusercontent.com/1000karat/netology-hw/refs/heads/main/img/hw-02-05.png)  

## –ó–∞–¥–∞–Ω–∏–µ 3 —Å–æ –∑–≤—ë–∑–¥–æ—á–∫–æ–π*
–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Zabbix Agent –Ω–∞ Windows (–∫–æ–º–ø—å—é—Ç–µ—Ä) –∏ –ø–æ–¥–∫–ª—é—á–∏—Ç–µ –µ–≥–æ –∫ —Å–µ—Ä–≤–µ—Ä—É Zabbix.

#### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º
1. –ü—Ä–∏–ª–æ–∂–∏—Ç–µ –≤ —Ñ–∞–π–ª README.md —Å–∫—Ä–∏–Ω—à–æ—Ç —Ä–∞–∑–¥–µ–ª–∞ Latest Data, –≥–¥–µ –≤–∏–¥–Ω–æ —Å–≤–æ–±–æ–¥–Ω–æ–µ –º–µ—Å—Ç–æ –Ω–∞ –¥–∏—Å–∫–µ C:

#### üîß –†–µ—à–µ–Ω–∏–µ
1. üìå –°–∫—Ä–∏–Ω—à–æ—Ç—ã:
![–°–∫—Ä–∏–Ω—à–æ—Ç Windows](https://raw.githubusercontent.com/1000karat/netology-hw/refs/heads/main/img/hw-02-06.png)  
